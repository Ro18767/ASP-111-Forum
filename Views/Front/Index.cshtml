@{
    ViewData["Title"] = "Front";
}

<div class="text-center">
    <h1 class="display-4">Распределеная архетектура фронт и бэкенд</h1>
</div>

<div class="alert alert-secondary" role="alert">
    <button type="button" class="btn btn-primary" data-api="GET">GET</button>
    <button type="button" class="btn btn-success" data-api="POST">POST</button>
    <button type="button" class="btn btn-warning" data-api="PUT">PUT</button>
    <button type="button" class="btn btn-danger" data-api="DELETE">DELETE</button>
</div>

<div class="alert alert-dark" role="alert" >
    <pre data-out></pre>
</div>

<script>
    document.querySelector('[data-api="GET"]')?.addEventListener('click', onClickGET);
    document.querySelector('[data-api="POST"]')?.addEventListener('click', onClickPOST);
    document.querySelector('[data-api="PUT"]')?.addEventListener('click', onClickPUT);
    document.querySelector('[data-api="DELETE"]')?.addEventListener('click', onClickDELETE);
    function onClickGET(event) {
        let method = event.target?.getAttribute('data-api');

        fetch("/api/back?x=10&y=20", {
            method,
            headers: {
                "Test": "just value"
            }
        })
            .then((responce) => responce.json())
            .then((data) => {
                console.log(data)
                let out_element = document.querySelector('[data-out]');
                if (out_element) out_element.textContent = JSON.stringify(data, null, 2);
            })
            ;
    }
    function onClickPOST(event) {
        let method = event.target?.getAttribute('data-api');
        let body = JSON.stringify({
            ata: 'test',
            [Math.random()]: Math.random(),
            "sdfgfghgfhj": "asdsdfdghygyjk",
            "вапвапвапарорололждлдвыпв": "фврнпаолджэ",
        });
        fetch("/api/back", {
            method: method,
            headers: {
                "Content-Type": "application/json",
                "Test": "just value"
            },
            body,
        })
            .then((responce) => responce.json())
            .then((data) => {
                console.log(data)
                let out_element = document.querySelector('[data-out]');
                if (out_element) out_element.textContent = JSON.stringify(data, null, 2);
            })
            ;
    } 
    function onClickPOST(event) {
        let method = event.target?.getAttribute('data-api');
        let body = JSON.stringify({
            ata: 'test',
            [Math.random()]: Math.random(),
            "sdfgfghgfhj": "asdsdfdghygyjk",
            "вапвапвапарорололждлдвыпв": "фврнпаолджэ",
        });
        fetch("/api/back", {
            method: method,
            headers: {
                "Content-Type": "application/json",
                "Test": "just value"
            },
            body,
        })
            .then((responce) => responce.json())
            .then((data) => {
                console.log(data)
                let out_element = document.querySelector('[data-out]');
                if (out_element) out_element.textContent = JSON.stringify(data, null, 2);
            })
            ;
    }
    function onClickPUT(event) {
        let method = event.target?.getAttribute('data-api');
        let body = JSON.stringify({
            ata: 'test',
            [Math.random()]: Math.random(),
            "sdfgfghgfhj": "asdsdfdghygyjk",
            "вапвапвапарорололждлдвыпв": "фврнпаолджэ",
        });
        fetch("/api/back", {
            method: method,
            headers: {
                "Content-Type": "application/json",
                "Test": "just value"
            },
            body,
        })
            .then((responce) => responce.json())
            .then((data) => {
                console.log(data)
                let out_element = document.querySelector('[data-out]');
                if (out_element) out_element.textContent = JSON.stringify(data, null, 2);
            })
            ;
    }
    function onClickDELETE(event) {
        let method = event.target?.getAttribute('data-api');
        let body = JSON.stringify({
            ata: 'test',
            [Math.random()]: Math.random(),
            "sdfgfghgfhj": "asdsdfdghygyjk",
            "вапвапвапарорололждлдвыпв": "фврнпаолджэ",
        });
        fetch("/api/back", {
            method: method,
            headers: {
                "Content-Type": "application/json",
                "Test": "just value"
            },
            body,
        })
            .then((responce) => responce.json())
            .then((data) => {
                console.log(data)
                let out_element = document.querySelector('[data-out]');
                if (out_element) out_element.textContent = JSON.stringify(data, null, 2);
            })
            ;
    }
   
    
</script>